{"version":3,"file":"i18n-dom.esm.js","sources":["../src/utils/index.ts","../src/utils/detect.ts","../src/index.ts"],"sourcesContent":[null,null,null],"names":["getCookie","name","key","cookieList","decodeURIComponent","document","cookie","split","i","length","charAt","substring","indexOf","defaultDetectOptions","order","lookupQuerystring","lookupCookie","lookupLocalStorage","lookupSessionStorage","caches","saveSelectedLanguage","lang","detectOptions","forEach","localStorage","sessionStorage","value","expiresDays","time","Date","setTime","getTime","toUTCString","setCookie","search","URLSearchParams","window","location","set","toString","setSearch","observerNodeOptions","childList","subtree","observerTextOptions","characterData","I18nDOM","constructor","attachNode","htmlLanguage","resource","language","fallbackLng","detection","this","body","documentElement","Object","assign","setLanguage","options","get","navigator","getDefaultLanguage","textObserver","MutationObserver","mutationList","stopTextObserve","mutation","translateTextNode","target","startTextObserve","nodeObserver","addedNodes","node","nodeType","translateNodeTree","startNodeObserve","observe","disconnect","stopNodeObserve","startObserve","stopObserve","save","langList","keys","result","changeLanguage","originalLanguage","getMacroContent","text","matchedMacro","matchAll","matchedIgnore","match","isIgnore","hasMacro","startIndex","_a","index","_b","_c","matchedData","matchedKey","info","matchedDetail","push","clearMacroInfo","macroStartIndex","root","el","textNodes","walk","createTreeWalker","NodeFilter","SHOW_TEXT","nextNode","getAllTextNodes","originalText","data","nextSibling","hasI18NDOMComment","includes","textInResource","comment","dataContent","ignoreMacro","createComment","replaceAll","replaceWith","after"],"mappings":"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"}